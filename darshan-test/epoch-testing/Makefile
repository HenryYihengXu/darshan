# Generated by configure from .in at Sun Jan 23 19:29:20 CET 2005

#CC	= mpicc.darshan
CC	= mpicc
LD	= $(CC)

CFLAGS	= -O0 -g -Wall -Wl,-rpath,../../darshan-runtime/lib

CFLAGS	+= -I../../darshan-runtime/lib -I. -I../../darshan-runtime -I../../darshan-florin-extensions
#LDFLAGS	= -Wl,-wrap,MPI_Init 
LDFLAGS =  -Wl,--no-as-needed -ldl -L../../darshan-runtime/lib -ldarshan 

#-L/home/fisaila/software/darshan-florin-extensions/darshan-runtime/lib -ldarshan-posix #-rdynamic -L/home/fisaila/software/darshan-florin-extensions/darshan-runtime/lib -ldarshan


OBJS	= 
LIBS    =  

SRCS	= $(patsubst %.o,%.c,$(OBJS))

PRGS	=  writef_noepoch writef counters coll_perf

all: $(PRGS)

%.o: %.c $(HEADERS)
	$(CC) $(CFLAGS) -c $*.c $(INCLUDE) -o $@

$(PRGS): $(OBJS) /homes/fisaila/software/darshan/lib/libdarshan.so
$(PRGS): 
$(PRGS): % : %.o
	$(CC) $(CFLAGS) -o $@ $< $(OBJS) $(LDFLAGS) $(LIBS)

clean:
	-rm -f *.o  *~ $(PRGS)

